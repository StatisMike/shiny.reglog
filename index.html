<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="RegLog system provides a set of shiny modules to handle register
   procedure for your users, alongside with login, edit credentials and
   password reset functionality. 
   It provides support for popular SQL databases
   and optionally googlesheet-based database for easy setup. For email sending
   it provides support for emayili and gmailr backends. Architecture makes 
   customizing usability pretty straightforward.
   The authentication system created 
   with shiny.reglog is designed to be optional: user don't need to be logged-in 
   to access your application, but when logged-in the user data can be used 
   to read from and write to relational databases.">
<title>Optional Login and Registration Module System for ShinyApps • shiny.reglog</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Optional Login and Registration Module System for ShinyApps">
<meta property="og:description" content="RegLog system provides a set of shiny modules to handle register
   procedure for your users, alongside with login, edit credentials and
   password reset functionality. 
   It provides support for popular SQL databases
   and optionally googlesheet-based database for easy setup. For email sending
   it provides support for emayili and gmailr backends. Architecture makes 
   customizing usability pretty straightforward.
   The authentication system created 
   with shiny.reglog is designed to be optional: user don't need to be logged-in 
   to access your application, but when logged-in the user data can be used 
   to read from and write to relational databases.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="index.html">shiny.reglog</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.5.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="articles/RegLogServer_object.html">RegLogServer object and its fields and methods</a>
    <a class="dropdown-item" href="articles/create_custom_handlers.html">Creating custom RegLogConnector handlers</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="shinyreglog">shiny.reglog<a class="anchor" aria-label="anchor" href="#shinyreglog"></a>
</h1></div>
<!-- badges: start -->

<div class="section level2">
<h2 id="1-introduction">1. Introduction<a class="anchor" aria-label="anchor" href="#1-introduction"></a>
</h2>
<p>The user authentication in Shiny applications can be very useful. Mainly, user can login to read and write some results of their session into relational database.</p>
<p>On the other hand, it may be handy for your App to allow access of unregistered users. If you need to secure your ShinyApp, there are better alternatives (<a href="https://github.com/datastorm-open/shinymanager" target="_blank" class="external-link">shinymanager</a> or <a href="https://github.com/PaulC91/shinyauthr" target="_blank" class="external-link">shinyauthr</a>)</p>
<p>This package contains modules to use in your Shiny application allowing you to automatically insert boxes for login, register, credentials edit and password reset and procedures.</p>
<p><em>shiny.reglog</em> supports as data containers either databases accessed with <code>RSQLite</code>, <code>RMariaDB</code>, <code>RMySQL</code> and <code>RPostgreSQL</code> drivers or googlesheets-based database (accessed by <code>googlesheets4</code> package).</p>
<p>It is highly recommended to use one of the <code>DBI</code>-supported databases, though. It is much more optimized and secure, as the database is never loaded as a whole into the memory, but queried as needed. <em>googlesheets</em> database is much easier to set-up, but it shouldn’t be used when you are expecting big userbase.</p>
<p>Registration, credentials edit and password reset procedures programmatically send email to the user of your ShinyApp - to welcome them, inform about change of their user ID and/or email and to give them a reset code to reset their password. <em>shiny.reglog</em> supports two methods of email sending: via <code>emayili</code> or <code>gmailr</code> packages. Both of them have their pros and cons, depending on your accesses: <code>emayili</code> allows for usage of many SMTP servers, while <code>gmailr</code> allowing using <em>gmail</em> messaging via Google REST API.</p>
<p>The <code>emayili</code> is recommended for most applications. <code>gmailr</code> can be useful if you already have application registered and authorized with mail sending scope.</p>
<blockquote>
<p>Currently the package is after major change in its code - basically full rewrite to allow more security, usage of more databases and more customization. Past functions are still available in current version, but will generate deprecation warnings.</p>
</blockquote>
</div>
<div class="section level2">
<h2 id="2-additional-information">2. Additional information<a class="anchor" aria-label="anchor" href="#2-additional-information"></a>
</h2>
<p>Basic information about <em>shiny.reglog</em> is contained within this document. There are some more resources to learn about its usage:</p>
<ul>
<li>You can access demonstration shinyApp with showcase mode on <a href="https://statismik.shinyapps.io/shinyreglog_demo/" target="_blank" class="external-link">shinyapps.io</a>
</li>
<li>You can run interactive demo in your own RStudio by using <code><a href="reference/RegLogDemo.html">RegLogDemo()</a></code> function. It will use mocked <em>mailConnector</em> by default or <em>RegLogEmayiliConnector</em> if you provide it arguments required by <code>emayili</code> backend.</li>
<li>For more information read vignettes.</li>
</ul>
</div>
<div class="section level2">
<h2 id="3-basic-structure">3. Basic structure<a class="anchor" aria-label="anchor" href="#3-basic-structure"></a>
</h2>
<p>There are three main objects that are to be used when implementing <em>RegLog</em> system for login and registration in your ShinyApp. All of them need to be defined in the <em>server</em> code.</p>
<ul>
<li>
<em>dbConnector</em>: one of <code>RegLogDBIConnector</code> or <code>RegLogGsheetConnector</code>. It will handle all writes, edits and inputs to the users database.</li>
<li>
<em>mailConnector</em>: one of <code>RegLogEmayiliConnector</code> or <code>RegLogGmailrConnector</code>. It will handle all automatical emailing to the user emails.</li>
<li>
<em>RegLogServer</em>: The main module producing and controlling all of UI and reactivity of the login and registration system. It uses <em>dbConnector</em> and <em>mailConnector</em> for actions external of R.</li>
</ul>
</div>
<div class="section level2">
<h2 id="4-installation">4. Installation<a class="anchor" aria-label="anchor" href="#4-installation"></a>
</h2>
<p>You can install this version of shiny.reglog from GitHub with:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># install version 0.5.0 from GitHub </span>
<span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"devtools"</span><span class="op">)</span>
<span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://devtools.r-lib.org/reference/remote-reexports.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"StatisMike/shiny.reglog"</span><span class="op">)</span>

<span class="co"># or install old version from CRAN</span>
<span class="co"># install.packages("shiny.reglog")</span></code></pre></div>
</div>
<div class="section level2">
<h2 id="5-setting-up-dbconnector">5. Setting up <em>dbConnector</em>
<a class="anchor" aria-label="anchor" href="#5-setting-up-dbconnector"></a>
</h2>
<p>You need to create <em>dbConnector</em> object to be used by the <em>RegLogServer</em> to write and read user data from the database.</p>
<p>To set-up the database for <em>RegLog</em> system, you can use helper functions included in this package. They are tested and guarantee compatible structure of the data.</p>
<div class="section level3">
<h3 id="51-googlesheet-database-method-regloggsheetconnector">5.1 Googlesheet database method (<em>RegLogGsheetConnector</em>)<a class="anchor" aria-label="anchor" href="#51-googlesheet-database-method-regloggsheetconnector"></a>
</h3>
<ol style="list-style-type: decimal">
<li>Create googlesheet file on your googledrive to support database. You can use <code><a href="reference/gsheet_tables_create.html">gsheet_tables_create()</a></code> function, which by default creates empty spreadsheets configured correctly.</li>
</ol>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># create googlesheet and gather its id for later usage</span>
<span class="co"># you can also specify optional 'name' argument for custom gsheet name</span>

<span class="va">gsheet_id</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/gsheet_tables_create.html">gsheet_tables_create</a></span><span class="op">(</span><span class="op">)</span>

<span class="co"># save you gsheet_id - you need to provide it later to your dbConnector</span></code></pre></div>
<p>If you wish to import some existing credentials, you can do it by giving the <code>data.frame</code> object to the <code>user_data</code> argument:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># get some credentials</span>
<span class="va">credentials</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>
  username <span class="op">=</span> <span class="st">"ShinyReglogTest"</span>,
  password <span class="op">=</span> <span class="st">"VeryHardPassword"</span>,
  email <span class="op">=</span> <span class="st">"shinyreglog@test"</span>
  <span class="op">)</span>

<span class="co"># create gsheet database with some credentials</span>
<span class="va">gsheet_id</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/gsheet_tables_create.html">gsheet_tables_create</a></span><span class="op">(</span>
  user_data <span class="op">=</span> <span class="va">credentials</span>,
  <span class="co"># as the password was not hashed with `script` before, it need to be</span>
  <span class="co"># hashed now</span>
  hash_passwords <span class="op">=</span> <span class="cn">T</span><span class="op">)</span></code></pre></div>
<ol start="2" style="list-style-type: decimal">
<li><p>Configure googlesheets4 package to use out-of-band (non-interactive) auth. For more information about it visit <a href="https://googlesheets4.tidyverse.org/" class="external-link">googlesheets4 documentation</a>.</p></li>
<li><p>In the <code>server</code> part of your ShinyApp define <code>RegLogGsheetConnector</code> to provide it afterwards to the <code>RegLogServer</code> object</p></li>
</ol>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">server</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">input</span>, <span class="va">output</span>, <span class="va">session</span><span class="op">)</span> <span class="op">{</span>
  
  <span class="va">dbConnector</span> <span class="op">&lt;-</span> <span class="va"><a href="reference/RegLogGsheetConnector.html">RegLogGsheetConnector</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>
    gsheet_ss <span class="op">=</span> <span class="va">gsheet_id</span><span class="op">)</span>
  
<span class="op">}</span></code></pre></div>
</div>
<div class="section level3">
<h3 id="52-dbi-compatible-sql-database-reglogdbiconnector">5.2 <code>DBI</code> compatible SQL database (<em>RegLogDBIConnector</em>)<a class="anchor" aria-label="anchor" href="#52-dbi-compatible-sql-database-reglogdbiconnector"></a>
</h3>
<p><em>RegLog system</em> out of the box supports <em>SQLite</em>, <em>MySQL</em>, <em>MariaDB</em> and <em>PostgreSQL</em> databases. You can use <code>DBI_tables_create</code> function, which by default creates empty tables configured correctly.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># create a connection to the database. Remember to use user with CREATE TABLE</span>
<span class="co"># scope enabled when useing MySQL, MariaDB or PostgreSQL connection</span>

<span class="va">conn</span> <span class="op">&lt;-</span> <span class="fu">DBI</span><span class="fu">::</span><span class="fu"><a href="https://dbi.r-dbi.org/reference/dbConnect.html" class="external-link">dbConnect</a></span><span class="op">(</span>
  <span class="fu">RSQLite</span><span class="fu">::</span><span class="fu"><a href="https://rsqlite.r-dbi.org/reference/SQLite.html" class="external-link">SQLite</a></span><span class="op">(</span><span class="op">)</span>,
  dbname <span class="op">=</span> <span class="st">"reglog_db.sqlite"</span>
<span class="op">)</span>

<span class="co"># using this connection create the tables.</span>
<span class="fu"><a href="reference/DBI_tables_create.html">DBI_tables_create</a></span><span class="op">(</span>conn <span class="op">=</span> <span class="va">conn</span><span class="op">)</span>

<span class="co"># disconnect from the database after creation</span>
<span class="fu">DBI</span><span class="fu">::</span><span class="fu"><a href="https://dbi.r-dbi.org/reference/dbDisconnect.html" class="external-link">dbDisconnect</a></span><span class="op">(</span><span class="va">conn</span><span class="op">)</span></code></pre></div>
<p>If you wish to import some credentials, you can do it by providing the <code>data.frame</code> object to the <code>user_data</code> argument:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># get some credentials</span>
<span class="va">credentials</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>
  username <span class="op">=</span> <span class="st">"ShinyReglogTest"</span>,
  password <span class="op">=</span> <span class="st">"VeryHardPassword"</span>,
  email <span class="op">=</span> <span class="st">"shinyreglog@test"</span><span class="op">)</span>

<span class="va">conn</span> <span class="op">&lt;-</span> <span class="fu">DBI</span><span class="fu">::</span><span class="fu"><a href="https://dbi.r-dbi.org/reference/dbConnect.html" class="external-link">dbConnect</a></span><span class="op">(</span>
  <span class="fu">RSQLite</span><span class="fu">::</span><span class="fu"><a href="https://rsqlite.r-dbi.org/reference/SQLite.html" class="external-link">SQLite</a></span><span class="op">(</span><span class="op">)</span>,
  dbname <span class="op">=</span> <span class="st">"reglog_db.sqlite"</span>
<span class="op">)</span>

<span class="co"># create database using the connection</span>
<span class="fu"><a href="reference/DBI_tables_create.html">DBI_tables_create</a></span><span class="op">(</span>conn <span class="op">=</span> <span class="va">conn</span>,
                  user_data <span class="op">=</span> <span class="va">credentials</span><span class="op">)</span>

<span class="fu">DBI</span><span class="fu">::</span><span class="fu"><a href="https://dbi.r-dbi.org/reference/dbDisconnect.html" class="external-link">dbDisconnect</a></span><span class="op">(</span><span class="va">conn</span><span class="op">)</span></code></pre></div>
<ol start="2" style="list-style-type: decimal">
<li>In the <em>server</em> part of your ShinyApp define <code>RegLogDBIConnector</code> to provide it afterwards to the <code>RegLogServer</code> object.</li>
</ol>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">server</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">input</span>, <span class="va">output</span>, <span class="va">session</span><span class="op">)</span> <span class="op">{</span>
  
  <span class="va">dbConnector</span> <span class="op">&lt;-</span> <span class="va"><a href="reference/RegLogDBIConnector.html">RegLogDBIConnector</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>
    driver <span class="op">=</span> <span class="fu">RSQLite</span><span class="fu">::</span><span class="fu"><a href="https://rsqlite.r-dbi.org/reference/SQLite.html" class="external-link">SQLite</a></span><span class="op">(</span><span class="op">)</span>,
    dbname <span class="op">=</span> <span class="st">"reglog_db.sqlite"</span><span class="op">)</span>
  
<span class="op">}</span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="6-setting-up-mail-connectors">6. Setting up mail connectors<a class="anchor" aria-label="anchor" href="#6-setting-up-mail-connectors"></a>
</h2>
<p>You need to create <em>mailConnector</em> object to be used by the <em>RegLogServer</em> to write and read user data from the database. There are two classes defined to use <code>emayili</code> or <code>gmailr</code> packages as backend.</p>
<div class="section level3">
<h3 id="61-using-emayili-reglogemayiliconnector">6.1. Using <code>emayili</code> (<em>RegLogEmayiliConnector</em>)<a class="anchor" aria-label="anchor" href="#61-using-emayili-reglogemayiliconnector"></a>
</h3>
<p>This backend is recommended to use. It supports many SMTP servers, mostly with username and password based identification.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">server</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">input</span>, <span class="va">output</span>, <span class="va">session</span><span class="op">)</span> <span class="op">{</span>
  
  <span class="va">mailConnector</span> <span class="op">&lt;-</span> <span class="va"><a href="reference/RegLogEmayiliConnector.html">RegLogEmayiliConnector</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>
    from <span class="op">=</span> <span class="st">"email@sending.com"</span>,
    <span class="co"># to learn how to setup emayili smtp server read ?emayili::server</span>
    smtp <span class="op">=</span> <span class="fu">emayili</span><span class="fu">::</span><span class="fu"><a href="https://datawookie.github.io/emayili/reference/server.html" class="external-link">server</a></span><span class="op">(</span><span class="va">...</span><span class="op">)</span>
  <span class="op">)</span>
  
<span class="op">}</span></code></pre></div>
</div>
<div class="section level3">
<h3 id="62-using-gmailr-regloggmailrconnector">6.2. Using <code>gmailr</code> (<em>RegLogGmailrConnector</em>)<a class="anchor" aria-label="anchor" href="#62-using-gmailr-regloggmailrconnector"></a>
</h3>
<p>This backend is only viable if you have an app registered in Google Cloud Console. It authorizes and sends email via gmail REST API, needing Oauth authorization with high scopes.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">server</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">input</span>, <span class="va">output</span>, <span class="va">session</span><span class="op">)</span> <span class="op">{</span>
  
  <span class="va">mailConnector</span> <span class="op">&lt;-</span> <span class="va"><a href="reference/RegLogGmailrConnector.html">RegLogGmailrConnector</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>
    from <span class="op">=</span> <span class="st">"email@gmail.com"</span>
  <span class="op">)</span>
  
<span class="op">}</span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="7-setup-reglogserver">7. Setup <em>RegLogServer</em>
<a class="anchor" aria-label="anchor" href="#7-setup-reglogserver"></a>
</h2>
<p>All of <strong>RegLog system</strong> is generated and maintained by the object of class <code>RegLogSystem</code> in unison with <em>dbConnector</em> and <em>mailConnector</em> of your choosing.</p>
<p>Its setup is pretty straightforward:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">server</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">input</span>, <span class="va">output</span>, <span class="va">session</span><span class="op">)</span> <span class="op">{</span>
  
  <span class="va">RegLog</span> <span class="op">&lt;-</span> <span class="va"><a href="reference/RegLogServer.html">RegLogServer</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>
    <span class="co"># both of these elements need to be defined firstly or in this call</span>
    dbConnector <span class="op">=</span> <span class="va">dbConnector</span>,
    mailConnector <span class="op">=</span> <span class="va">mailConnector</span>
  <span class="op">)</span>
<span class="op">}</span></code></pre></div>
<p>Besides these two mandatory arguments, there are also some additional arguments to be used for customization.</p>
<ul>
<li>
<code>app_name</code>: your application name. It will be used within emails send to users. If not specified, the name of the folder containing you application files will be used.</li>
<li>
<code>app_address</code>: URL address to your application. It will be used within emails send to users. If not specified, the email address contained within <em>session$clientData</em> will be used.</li>
<li>
<code>lang</code>: language to be used in UI elements and send emails. Defaults to ‘en’ for <em>English</em>. Currently also ‘pl’ for <em>Polish</em> is supported. Besides that, you can also specify ‘i18’ to generate only text indicators - external methods can be used to parse the message in given language can be then used (eg. <code>shiny.i18n</code> package).</li>
<li>
<code>custom_txts</code>: named list with character strings of custom texts to be used by the system. For more information call <code><a href="reference/RegLog_txt.html">?RegLog_txt</a></code>.</li>
<li>
<code>use_modals</code>: either boolean indicating if all default modalDialogs should be shown or named list of <code>FALSE</code> values inhibiting specific ones. For more information read <strong>RegLogServer object fields and methods</strong>, section <strong>Message</strong>. All modals are listed there alongside conditions of their appearance.</li>
<li>
<code>module_id</code>: character string with ID of the module. Recommended to leave as default - unless if that name is taken by another module.</li>
</ul>
<div class="section level3">
<h3 id="71-retrieve-information-from-reglogserver">7.1. Retrieve information from <strong>RegLogServer</strong>
<a class="anchor" aria-label="anchor" href="#71-retrieve-information-from-reglogserver"></a>
</h3>
<p>After setting up and assigning the object your application logic can observe status of user in current session by public fields containing <em>reactiveVal</em> objects.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">## if you assigned the RegLogServer to 'RegLog' object, as in examples above:</span>

<span class="co"># boolean showing if the user is logged in:</span>
<span class="va">RegLog</span><span class="op">$</span><span class="fu">is_logged</span><span class="op">(</span><span class="op">)</span>

<span class="co"># character vector containing user ID: either specific to the user if logged</span>
<span class="co"># in, or unique anonymous ID generated with 'uuid::UUIDgenerate()'</span>
<span class="va">RegLog</span><span class="op">$</span><span class="fu">user_id</span><span class="op">(</span><span class="op">)</span>

<span class="co"># character vector containing user email if logged in</span>
<span class="va">RegLog</span><span class="op">$</span><span class="fu">user_mail</span><span class="op">(</span><span class="op">)</span>

<span class="co"># integer of the account ID inside the database - for identifying the logged user</span>
<span class="co"># across relative tables</span>
<span class="va">RegLog</span><span class="op">$</span><span class="fu">account_id</span><span class="op">(</span><span class="op">)</span></code></pre></div>
<blockquote>
<p>There are much more to be learned about RegLogServer object - for more information read <strong>RegLogServer object fields and methods</strong>. Above information is enough for basic setup.</p>
</blockquote>
</div>
</div>
<div class="section level2">
<h2 id="8-insert-ui-elements">8. Insert UI elements<a class="anchor" aria-label="anchor" href="#8-insert-ui-elements"></a>
</h2>
<p>Every part of the UI is generated by <em>RegLogServer</em>, and could be accessed by provided functions containing <code>tagList</code>.</p>
<div class="section level3">
<h3 id="81-login-ui">8.1. Login UI<a class="anchor" aria-label="anchor" href="#81-login-ui"></a>
</h3>
<p>Providing GUI to allow logging in if user is already registered to your application.</p>
<p><img src="reference/figures/login_UI.png" style="filter: drop-shadow(5px 5px 5px black); margin-bottom: 5px;"></p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="reference/RegLog_login_UI.html">RegLog_login_UI</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
</div>
<div class="section level3">
<h3 id="82-register-ui">8.2. Register UI<a class="anchor" aria-label="anchor" href="#82-register-ui"></a>
</h3>
<p>Providing GUI for registering new account.</p>
<ul>
<li>Both user ID and e-mail needs to be unique within the databasa</li>
<li>user ID need to consist of 8-30 alphanumeric characters</li>
<li>user password need to consist of 8-30 characters. It needs to contain characters of at least 3 of 4 following groups:
<ul>
<li>small letter</li>
<li>big letter</li>
<li>number</li>
<li>special character</li>
</ul>
</li>
<li>user email is also validated</li>
</ul>
<p>After account registration, user will receive confirmation email on their password.</p>
<p><img src="reference/figures/register_UI.png" style="filter: drop-shadow(5px 5px 5px black); margin-bottom: 5px;"></p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="reference/RegLog_register_UI.html">RegLog_register_UI</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
</div>
<div class="section level3">
<h3 id="83-credentials-edit-ui">8.3. Credentials edit UI<a class="anchor" aria-label="anchor" href="#83-credentials-edit-ui"></a>
</h3>
<p>Providing GUI for changing credentials.</p>
<ul>
<li>user need to be logged in to change their data</li>
<li>to confirm their identity, they need to provide their current password</li>
<li>user can change either during one interaction:
<ul>
<li>password</li>
<li>user ID and/or e-mail</li>
</ul>
</li>
<li>same checks as in register procedure are conducted</li>
<li>after user ID and/or e-mail change user will receive confirmation e-mail</li>
</ul>
<p><img src="reference/figures/credsEdit_UI.png" style="filter: drop-shadow(5px 5px 5px black); margin-bottom: 5px;"></p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="reference/RegLog_credsEdit_UI.html">RegLog_credsEdit_UI</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
</div>
<div class="section level3">
<h3 id="84-reset-password-ui">8.4. Reset password UI<a class="anchor" aria-label="anchor" href="#84-reset-password-ui"></a>
</h3>
<p>Providing GUI for password reset.</p>
<ul>
<li>in the case of user forgetting their password, they can reset it by providing their user ID</li>
<li>mail message containing reset code will be sent to the user</li>
<li>inputing the reset code from e-mail will allow password change</li>
<li>same password check for new password is conducted as in register procedure</li>
</ul>
<p><img src="reference/figures/resetPass_UI.png" style="filter: drop-shadow(5px 5px 5px black); margin-bottom: 5px;"></p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="reference/RegLog_resetPass_UI.html">RegLog_resetPass_UI</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
</div>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://cloud.r-project.org/package=shiny.reglog" class="external-link">View on CRAN</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing shiny.reglog</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Michal Kosinski <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/https://orcid.org/0000-0002-8426-3654" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://lifecycle.r-lib.org/articles/stages.html" class="external-link"><img src="https://img.shields.io/badge/lifecycle-stable-green.svg" alt="Lifecycle: stable"></a></li>
<li><a href="https://CRAN.R-project.org/package=shiny.reglog" class="external-link"><img src="https://www.r-pkg.org/badges/version/shiny.reglog" alt="CRAN status"></a></li>
<li><a href="https://cranchecks.info/pkgs/shiny.reglog" class="external-link"><img src="https://cranchecks.info/badges/worst/shiny.reglog" alt="CRAN checks"></a></li>
<li><a href="https://cran.r-project.org/package=shiny.reglog" class="external-link"><img src="http://cranlogs.r-pkg.org/badges/last-month/shiny.reglog?color=green"></a></li>
<li><a href="https://cran.r-project.org/package=shiny.reglog" class="external-link"><img src="http://cranlogs.r-pkg.org/badges/grand-total/shiny.reglog?color=blue"></a></li>
<li><a href="https://app.codecov.io/gh/StatisMike/shiny.reglog?branch=master" class="external-link"><img src="https://codecov.io/gh/StatisMike/shiny.reglog/branch/master/graph/badge.svg" alt="Codecov test coverage"></a></li>
<li><a href="https://github.com/StatisMike/shiny.reglog/actions" class="external-link"><img src="https://github.com/StatisMike/shiny.reglog/workflows/R-CMD-check/badge.svg" alt="R-CMD-check"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Michal Kosinski.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.2.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
