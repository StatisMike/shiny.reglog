<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="shiny.reglog">
<title>Creating custom RegLogConnector handlers • shiny.reglog</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.3/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.3/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Creating custom RegLogConnector handlers">
<meta property="og:description" content="shiny.reglog">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">shiny.reglog</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.5.2</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/RegLogServer_object.html">RegLogServer object and its fields and methods</a>
    <a class="dropdown-item" href="../articles/create_custom_handlers.html">Creating custom RegLogConnector handlers</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-article">



<script src="create_custom_handlers_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Creating custom RegLogConnector handlers</h1>
            
      
      
      <div class="d-none name"><code>create_custom_handlers.Rmd</code></div>
    </div>

    
    
<p><em>shiny.reglog</em> package requires user to create <em>dbConnector</em> and <em>mailConnector</em> for the <em>RegLogServer</em> functionality. While creating ShinyApp almost always you want to use one database and one emailing procedure. For all usage beyond <em>RegLogServer</em> defaults, it would be suboptimal to define new connections. That’s why during development I came to the conclusion that these connectors should allow for easy extensions with custom functions.</p>
<p>The scope of this vignette is to describe:</p>
<ul>
<li>how the <em>RegLogConnectors</em> operate</li>
<li>the default <em>handlers functions</em>
</li>
<li>how to write custom <em>handler function</em>
</li>
</ul>
<div class="section level2">
<h2 id="reglogconnector-dataflow">
<em>RegLogConnector</em> dataflow<a class="anchor" aria-label="anchor" href="#reglogconnector-dataflow"></a>
</h2>
<p>Both <em>dbConnectors</em> (<code>RegLogDBIConnector</code> and <code>RegLogGsheetConnector</code>) and <em>mailConnectors</em> (<code>RegLogEmayiliConnector</code> and <code>RegLogGmailrConnector</code>) inherits from more general class: <code>RegLogConnector</code>. There are three public fields that are key for the whole dataflow:</p>
<ul>
<li>
<code>RegLogConnector$listener()</code> - <em>reactiveVal</em> object that intakes <em>RegLogConnectorMessage</em> object. <em>RegLogConnector</em> listens to any change in the value of this this object and reacts accordingly.</li>
<li>
<code>RegLogConnector$handlers</code> - <em>named list</em> of <strong>handler functions</strong>. For every <code>type</code> of received message there should be a specific function appended there. All of them should return another <em>RegLogConnectorMessage</em> object informing about the result of the function.</li>
<li>
<code>RegLogConnector$message()</code> - <em>reactiveVal</em> object containing <em>RegLogConnectorMessage</em> that are returned from <strong>handler function</strong>.</li>
</ul>
<div class="section level3">
<h3 id="reglogconnectormessage-object">RegLogConnectorMessage object<a class="anchor" aria-label="anchor" href="#reglogconnectormessage-object"></a>
</h3>
<p><code>RegLogConnector</code> object reacts upon receiving some kind of <em>RegLogConnectorMessage</em> object and responds likewise. Its an <code>S3</code> class object that contains four fields:</p>
<ul>
<li>
<code>time</code>: timestamp on which the message was generated</li>
<li>
<code>type</code>: character string declaring handler function of the <em>RegLogConnector</em> that should be called when object receive message.</li>
<li>
<code>data</code>: list of objects, usually some kind of input or output of the handler function</li>
<li>
<code>logcontent</code>: character string declaring content that should be saved into <em>RegLogConnector</em> logs.</li>
</ul>
<p>You can create message freely using function of the same name:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">message</span> <span class="op">&lt;-</span> </span>
<span>  <span class="fu"><a href="../reference/RegLogConnectorMessage.html">RegLogConnectorMessage</a></span><span class="op">(</span></span>
<span>    type <span class="op">=</span> <span class="st">"test"</span>,</span>
<span>    dataframe <span class="op">=</span> <span class="va">mtcars</span>,</span>
<span>    numbers <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">0</span>, <span class="fl">100</span><span class="op">)</span>,</span>
<span>    logcontent <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"I contain data.frame and random numbers"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">message</span><span class="op">)</span></span>
<span><span class="co">#&gt; List of 4</span></span>
<span><span class="co">#&gt;  $ time      : chr "2022-08-29 21:10:06.906"</span></span>
<span><span class="co">#&gt;  $ type      : chr "test"</span></span>
<span><span class="co">#&gt;  $ data      :List of 2</span></span>
<span><span class="co">#&gt;   ..$ dataframe:'data.frame':    32 obs. of  11 variables:</span></span>
<span><span class="co">#&gt;   .. ..$ mpg : num [1:32] 21 21 22.8 21.4 18.7 18.1 14.3 24.4 22.8 19.2 ...</span></span>
<span><span class="co">#&gt;   .. ..$ cyl : num [1:32] 6 6 4 6 8 6 8 4 4 6 ...</span></span>
<span><span class="co">#&gt;   .. ..$ disp: num [1:32] 160 160 108 258 360 ...</span></span>
<span><span class="co">#&gt;   .. ..$ hp  : num [1:32] 110 110 93 110 175 105 245 62 95 123 ...</span></span>
<span><span class="co">#&gt;   .. ..$ drat: num [1:32] 3.9 3.9 3.85 3.08 3.15 2.76 3.21 3.69 3.92 3.92 ...</span></span>
<span><span class="co">#&gt;   .. ..$ wt  : num [1:32] 2.62 2.88 2.32 3.21 3.44 ...</span></span>
<span><span class="co">#&gt;   .. ..$ qsec: num [1:32] 16.5 17 18.6 19.4 17 ...</span></span>
<span><span class="co">#&gt;   .. ..$ vs  : num [1:32] 0 0 1 1 0 1 0 1 1 1 ...</span></span>
<span><span class="co">#&gt;   .. ..$ am  : num [1:32] 1 1 1 0 0 0 0 0 0 0 ...</span></span>
<span><span class="co">#&gt;   .. ..$ gear: num [1:32] 4 4 4 3 3 3 3 4 4 4 ...</span></span>
<span><span class="co">#&gt;   .. ..$ carb: num [1:32] 4 4 1 1 2 1 4 2 2 4 ...</span></span>
<span><span class="co">#&gt;   ..$ numbers  : num [1:10] 20.42 69.19 5.05 61.95 56.41 ...</span></span>
<span><span class="co">#&gt;  $ logcontent: chr "I contain data.frame and random numbers"</span></span>
<span><span class="co">#&gt;  - attr(*, "class")= chr "RegLogConnectorMessage"</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="default-handler-functions-for-dbconnectors">Default handler functions for <em>dbConnectors</em><a class="anchor" aria-label="anchor" href="#default-handler-functions-for-dbconnectors"></a>
</h2>
<p>Both <em>RegLogDBIConnector</em> and <em>RegLogGsheetConnector</em> contain the same default handler functions. In this vignette I will focus on the messages that are received by the handler functions and their general usability. To learn about messages produced by these functions, check “RegLogServer object fields and methods” vignette and its “Message” section - as all of these messages are finally exposed in <code>RegLogServer$message()</code> public field.</p>
<p>All of these functions aren’t exported, as they are used only internally. You can read the documentation for them though with usual syntax of <code>?function</code> in console. Documentation is rendered for information how to react with them by creating <em>RegLogConnectorMessages</em> yourself.</p>
<div class="section level3">
<h3 id="handler-for-login-type-message">Handler for <em>login</em> type message<a class="anchor" aria-label="anchor" href="#handler-for-login-type-message"></a>
</h3>
<ul>
<li>
<em>RegLogDBIConnector</em>: <code>DBI_login_handler</code>
</li>
<li>
<em>RegLogGsheetConnector</em>: <code>gsheet_login_handler</code>
</li>
</ul>
<p>These functions are handling querying the database for the specified by the user of the ShinyApp user ID and password and check if there is a match. Message structure:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">login_message</span> <span class="op">&lt;-</span> </span>
<span>  <span class="fu"><a href="../reference/RegLogConnectorMessage.html">RegLogConnectorMessage</a></span><span class="op">(</span></span>
<span>    type <span class="op">=</span> <span class="st">"login"</span>,</span>
<span>    username <span class="op">=</span> <span class="st">"Whatever"</span>,</span>
<span>    password <span class="op">=</span> <span class="st">"&amp;f5*MSYj^niDt=V'3.[dyEX.C/"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">login_message</span><span class="op">)</span></span>
<span><span class="co">#&gt; List of 4</span></span>
<span><span class="co">#&gt;  $ time      : chr "2022-08-29 21:10:07.010"</span></span>
<span><span class="co">#&gt;  $ type      : chr "login"</span></span>
<span><span class="co">#&gt;  $ data      :List of 2</span></span>
<span><span class="co">#&gt;   ..$ username: chr "Whatever"</span></span>
<span><span class="co">#&gt;   ..$ password: chr "&amp;f5*MSYj^niDt=V'3.[dyEX.C/"</span></span>
<span><span class="co">#&gt;  $ logcontent: NULL</span></span>
<span><span class="co">#&gt;  - attr(*, "class")= chr "RegLogConnectorMessage"</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="handlers-for-register-type-message">Handlers for <em>register</em> type message<a class="anchor" aria-label="anchor" href="#handlers-for-register-type-message"></a>
</h3>
<ul>
<li>
<em>RegLogDBIConnector</em>: <code>DBI_register_handler</code>
</li>
<li>
<em>RegLogGsheetConnector</em>: <code>gsheet_register_handler</code>
</li>
</ul>
<p>These functions are handling querying the database and checking if the specified user ID and email for new user aren’t already existing in the database. If there is no conflicts, it will then hash provided password and input new row. Message structure:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">register_message</span> <span class="op">&lt;-</span> </span>
<span>  <span class="fu"><a href="../reference/RegLogConnectorMessage.html">RegLogConnectorMessage</a></span><span class="op">(</span></span>
<span>    type <span class="op">=</span> <span class="st">"register"</span>,</span>
<span>    username <span class="op">=</span> <span class="st">"IAmNewThere"</span>,</span>
<span>    email <span class="op">=</span> <span class="st">"something@new.com"</span>,</span>
<span>    password <span class="op">=</span> <span class="st">"veryHardP422w0rd!"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">register_message</span><span class="op">)</span></span>
<span><span class="co">#&gt; List of 4</span></span>
<span><span class="co">#&gt;  $ time      : chr "2022-08-29 21:10:07.101"</span></span>
<span><span class="co">#&gt;  $ type      : chr "register"</span></span>
<span><span class="co">#&gt;  $ data      :List of 3</span></span>
<span><span class="co">#&gt;   ..$ username: chr "IAmNewThere"</span></span>
<span><span class="co">#&gt;   ..$ email   : chr "something@new.com"</span></span>
<span><span class="co">#&gt;   ..$ password: chr "veryHardP422w0rd!"</span></span>
<span><span class="co">#&gt;  $ logcontent: NULL</span></span>
<span><span class="co">#&gt;  - attr(*, "class")= chr "RegLogConnectorMessage"</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="handlers-for-credsedit-type-message">Handlers for <em>credsEdit</em> type message<a class="anchor" aria-label="anchor" href="#handlers-for-credsedit-type-message"></a>
</h3>
<ul>
<li>
<em>RegLogDBIConnector</em>: <code>DBI_credsEdit_handler</code>
</li>
<li>
<em>RegLogGsheetConnector</em>: <code>gsheet_credsEdit_handler</code>
</li>
</ul>
<p>These functions are querying the database to search for the specified account ID and verify password. After confirming user identity, it can update the database row for this user with any or all of: new username, new email and new password. Message structure:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">credsEdit_message</span> <span class="op">&lt;-</span> </span>
<span>  <span class="fu"><a href="../reference/RegLogConnectorMessage.html">RegLogConnectorMessage</a></span><span class="op">(</span></span>
<span>    type <span class="op">=</span> <span class="st">"credsEdit"</span>,</span>
<span>    account_id <span class="op">=</span> <span class="fl">1</span>,</span>
<span>    password <span class="op">=</span> <span class="st">"&amp;f5*MSYj^niDt=V'3.[dyEX.C/"</span>,</span>
<span>    new_username <span class="op">=</span> <span class="st">"Whenever"</span>,</span>
<span>    new_email <span class="op">=</span> <span class="st">"edited@email.com"</span>,</span>
<span>    new_password <span class="op">=</span> <span class="st">"veryHardP422w0rd!"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">credsEdit_message</span><span class="op">)</span></span>
<span><span class="co">#&gt; List of 4</span></span>
<span><span class="co">#&gt;  $ time      : chr "2022-08-29 21:10:07.199"</span></span>
<span><span class="co">#&gt;  $ type      : chr "credsEdit"</span></span>
<span><span class="co">#&gt;  $ data      :List of 5</span></span>
<span><span class="co">#&gt;   ..$ account_id  : num 1</span></span>
<span><span class="co">#&gt;   ..$ password    : chr "&amp;f5*MSYj^niDt=V'3.[dyEX.C/"</span></span>
<span><span class="co">#&gt;   ..$ new_username: chr "Whenever"</span></span>
<span><span class="co">#&gt;   ..$ new_email   : chr "edited@email.com"</span></span>
<span><span class="co">#&gt;   ..$ new_password: chr "veryHardP422w0rd!"</span></span>
<span><span class="co">#&gt;  $ logcontent: NULL</span></span>
<span><span class="co">#&gt;  - attr(*, "class")= chr "RegLogConnectorMessage"</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="handlers-for-resetcode_generate-type-message">Handlers for <em>resetCode_generate</em> type message<a class="anchor" aria-label="anchor" href="#handlers-for-resetcode_generate-type-message"></a>
</h3>
<ul>
<li>
<em>RegLogDBIConnector</em>: <code>DBI_resetPass_generation_handler</code>
</li>
<li>
<em>RegLogGsheetConnector</em>: <code>gsheet_resetPass_generation_handler</code>
</li>
</ul>
<p>These functions are querying the database to search for the specified username. After confirming that the specified username exists, it generates and inputs reset code that the user can use to generate new password. Message structure:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">resetPass_generate_message</span> <span class="op">&lt;-</span> </span>
<span>  <span class="fu"><a href="../reference/RegLogConnectorMessage.html">RegLogConnectorMessage</a></span><span class="op">(</span></span>
<span>    type <span class="op">=</span> <span class="st">"resetPass_generate"</span>,</span>
<span>    username <span class="op">=</span> <span class="st">"Whatever"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">resetPass_generate_message</span><span class="op">)</span></span>
<span><span class="co">#&gt; List of 4</span></span>
<span><span class="co">#&gt;  $ time      : chr "2022-08-29 21:10:07.291"</span></span>
<span><span class="co">#&gt;  $ type      : chr "resetPass_generate"</span></span>
<span><span class="co">#&gt;  $ data      :List of 1</span></span>
<span><span class="co">#&gt;   ..$ username: chr "Whatever"</span></span>
<span><span class="co">#&gt;  $ logcontent: NULL</span></span>
<span><span class="co">#&gt;  - attr(*, "class")= chr "RegLogConnectorMessage"</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="handlers-for-resetcode_confirm-type-message">Handlers for <em>resetCode_confirm</em> type message<a class="anchor" aria-label="anchor" href="#handlers-for-resetcode_confirm-type-message"></a>
</h3>
<ul>
<li>
<em>RegLogDBIConnector</em>: <code>DBI_resetPass_confirmation_handler</code>
</li>
<li>
<em>RegLogGsheetConnector</em>: <code>gsheet_resetPass_confirmation_handler</code>
</li>
</ul>
<p>These functions are querying the database to search for the specified username and confirming that provided reset code is correct. After confirmation, it marks the reset code as used and updates password for the user. Message structure:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">resetPass_confirm_message</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu"><a href="../reference/RegLogConnectorMessage.html">RegLogConnectorMessage</a></span><span class="op">(</span></span>
<span>    type <span class="op">=</span> <span class="st">"resetPass_confirm"</span>,</span>
<span>    username <span class="op">=</span> <span class="st">"Whatever"</span>,</span>
<span>    reset_code <span class="op">=</span> <span class="st">"4265417643"</span>,</span>
<span>    password <span class="op">=</span> <span class="st">"veryHardP422w0rd!"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">resetPass_confirm_message</span><span class="op">)</span></span>
<span><span class="co">#&gt; List of 4</span></span>
<span><span class="co">#&gt;  $ time      : chr "2022-08-29 21:10:07.382"</span></span>
<span><span class="co">#&gt;  $ type      : chr "resetPass_confirm"</span></span>
<span><span class="co">#&gt;  $ data      :List of 3</span></span>
<span><span class="co">#&gt;   ..$ username  : chr "Whatever"</span></span>
<span><span class="co">#&gt;   ..$ reset_code: chr "4265417643"</span></span>
<span><span class="co">#&gt;   ..$ password  : chr "veryHardP422w0rd!"</span></span>
<span><span class="co">#&gt;  $ logcontent: NULL</span></span>
<span><span class="co">#&gt;  - attr(*, "class")= chr "RegLogConnectorMessage"</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="default-handler-function-for-mailconnectors">Default handler function for <em>mailConnectors</em><a class="anchor" aria-label="anchor" href="#default-handler-function-for-mailconnectors"></a>
</h2>
<p>All default handlers for <em>mailConnectors</em> use the same handler functions:</p>
<ul>
<li>
<em>RegLogEmayiliConnector</em>: <code>emayili_reglog_mail_handler</code>
</li>
<li>
<em>RegLogGmailrConnector</em>: <code>gmailr_reglog_mail_handler</code>
</li>
</ul>
<p>They send the email to the specified address using subject and html body of the email kept in the <code>mailConnector$mails[[message_type]]</code> list. They also replace all of occurences of <em>?username?</em>, <em>?email?</em>, <em>?app_name?</em>, <em>?app_address?</em> and <em>?reset_code?</em> with respective values received in the <em>RegLogConnectorMessage</em>.</p>
<p>Mail creation is chosen from the <code>mailConnector$mails</code> public field on the basis of the <code>process</code> <em>RegLogConnectorMessage</em> value.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">resetPass_mail_message</span> <span class="op">&lt;-</span> </span>
<span>  <span class="fu"><a href="../reference/RegLogConnectorMessage.html">RegLogConnectorMessage</a></span><span class="op">(</span></span>
<span>    type <span class="op">=</span> <span class="st">"reglog_mail"</span>,</span>
<span>    process <span class="op">=</span> <span class="st">"resetPass"</span>,</span>
<span>    username <span class="op">=</span> <span class="st">"Whatever"</span>,</span>
<span>    email <span class="op">=</span> <span class="st">"edited@email.com"</span>,</span>
<span>    app_name <span class="op">=</span> <span class="st">"RegLog Nice ShinyApp"</span>,</span>
<span>    app_address <span class="op">=</span> <span class="st">"https://reglog.nice.com"</span>,</span>
<span>    reset_code <span class="op">=</span> <span class="st">"4265417643"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">resetPass_mail_message</span><span class="op">)</span></span>
<span><span class="co">#&gt; List of 4</span></span>
<span><span class="co">#&gt;  $ time      : chr "2022-08-29 21:10:07.479"</span></span>
<span><span class="co">#&gt;  $ type      : chr "reglog_mail"</span></span>
<span><span class="co">#&gt;  $ data      :List of 6</span></span>
<span><span class="co">#&gt;   ..$ process    : chr "resetPass"</span></span>
<span><span class="co">#&gt;   ..$ username   : chr "Whatever"</span></span>
<span><span class="co">#&gt;   ..$ email      : chr "edited@email.com"</span></span>
<span><span class="co">#&gt;   ..$ app_name   : chr "RegLog Nice ShinyApp"</span></span>
<span><span class="co">#&gt;   ..$ app_address: chr "https://reglog.nice.com"</span></span>
<span><span class="co">#&gt;   ..$ reset_code : chr "4265417643"</span></span>
<span><span class="co">#&gt;  $ logcontent: NULL</span></span>
<span><span class="co">#&gt;  - attr(*, "class")= chr "RegLogConnectorMessage"</span></span></code></pre></div>
<p>There are also provided handlers to send custom e-mails to the logged user.</p>
<ul>
<li>
<em>RegLogEmayiliConnector</em>: <code>emayili_custom_mail_handler</code>
</li>
<li>
<em>RegLogGmailrConnector</em>: <code>gmailr_custom_mail_handler</code>
</li>
</ul>
<p>They are sending email to the specified address parsing it from provided inside the message <em>subject</em> and <em>body</em>, providing also an option to send an <em>attachment</em>. No additional parsing is done there and <code>process</code> value there is only informative - it is saved into logs and presented in the <code>RegLogServer$mail_message()</code> field.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">message_to_send</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/RegLogConnectorMessage.html">RegLogConnectorMessage</a></span><span class="op">(</span></span>
<span>    type <span class="op">=</span> <span class="st">"custom_mail"</span>,</span>
<span>    process <span class="op">=</span> <span class="st">"attachment_mail"</span>,</span>
<span>    username <span class="op">=</span> <span class="st">"Whatever"</span>,</span>
<span>    email <span class="op">=</span> <span class="st">"edited@email.com"</span>,</span>
<span>    mail_subject <span class="op">=</span> <span class="st">"Custom message with attachement"</span>,</span>
<span>    mail_body <span class="op">=</span> <span class="st">"&lt;p&gt;This is a custom message send from my App&lt;/p&gt;</span></span>
<span><span class="st">                 &lt;p&gt;It is completely optional, but that kind of message can also</span></span>
<span><span class="st">                    contain an attachment!&lt;/p&gt;"</span>,</span>
<span>    mail_attachement <span class="op">=</span> <span class="st">"files/myplot.png"</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="how-to-create-custom-handler-function">How to create custom <em>handler function</em><a class="anchor" aria-label="anchor" href="#how-to-create-custom-handler-function"></a>
</h2>
<p><em>Handler function</em> system of <em>dbConnectors</em> and <em>mailConnectors</em> allows for creating custom logic for communicating with them.</p>
<p>For example purposes the custom action that will be described in this vignette will be the process of saving and reading from <em>googlesheet</em> based database results of simple, 10-item questionnaire: Rosenberg’s Self-esteem scale.</p>
<div class="section level3">
<h3 id="setup-the-grounds-to-store-the-data">Setup the grounds to store the data<a class="anchor" aria-label="anchor" href="#setup-the-grounds-to-store-the-data"></a>
</h3>
<p>Firstly, we need to create another sheet in the googlesheet that is used by the <em>RegLogGsheetConnector</em> to store our data. Besides the summed score we will also need timestamp and username to read the most recent row for the currently logged user.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># create new sheet to the googlesheet</span></span>
<span><span class="fu">googlesheets4</span><span class="fu">::</span><span class="fu"><a href="https://googlesheets4.tidyverse.org/reference/sheet_write.html" class="external-link">write_sheet</a></span><span class="op">(</span></span>
<span>  ss <span class="op">=</span> <span class="va">gsheet_ss</span>,</span>
<span>  sheet <span class="op">=</span> <span class="st">"SES_results"</span>,</span>
<span>  <span class="co"># append 0-row data.frame to create the "schema" for the sheet</span></span>
<span>  data <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>timestamp <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="cn">NA</span><span class="op">)</span>,</span>
<span>                    user_id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="cn">NA</span><span class="op">)</span>,</span>
<span>                    score <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="cn">NA</span><span class="op">)</span><span class="op">)</span><span class="op">[</span><span class="op">-</span><span class="fl">1</span>,<span class="op">]</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="create-a-handler-for-writing-to-database">Create a handler for writing to database<a class="anchor" aria-label="anchor" href="#create-a-handler-for-writing-to-database"></a>
</h3>
<p>All handler functions need to take as arguments objects <code>self</code>, <code>private</code> and <code>message</code> and return <code>RegLogConnectorMessage</code>.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">write_SES_handler</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">self</span>, <span class="va">private</span>, <span class="va">message</span><span class="op">)</span> <span class="op">{</span></span>
<span>  </span>
<span>  <span class="fu">googlesheets4</span><span class="fu">::</span><span class="fu"><a href="https://googlesheets4.tidyverse.org/reference/sheet_append.html" class="external-link">sheet_append</a></span><span class="op">(</span></span>
<span>    <span class="co"># ID of the connected googlesheet is stored inside private of the</span></span>
<span>    <span class="co"># RegLogGsheetConnector</span></span>
<span>    ss <span class="op">=</span> <span class="va">private</span><span class="op">$</span><span class="va">gsheet_ss</span>,</span>
<span>    sheet <span class="op">=</span> <span class="st">"SES_results"</span>,</span>
<span>    data <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>      <span class="co"># db_timestamp creates nicely formatted and interpretable by most</span></span>
<span>      <span class="co"># databases current time</span></span>
<span>      timestamp <span class="op">=</span> <span class="fu"><a href="../reference/db_timestamp.html">db_timestamp</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>      <span class="co"># user ID and score should be received inside received message</span></span>
<span>      user_id <span class="op">=</span> <span class="va">message</span><span class="op">$</span><span class="va">data</span><span class="op">$</span><span class="va">user_id</span>,</span>
<span>      score <span class="op">=</span> <span class="va">message</span><span class="op">$</span><span class="va">data</span><span class="op">$</span><span class="va">score</span></span>
<span>      <span class="op">)</span><span class="op">)</span></span>
<span>  </span>
<span>  <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="fu"><a href="../reference/RegLogConnectorMessage.html">RegLogConnectorMessage</a></span><span class="op">(</span>type <span class="op">=</span> <span class="st">"write_SES"</span>,</span>
<span>                                success <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span>
<span>  </span>
<span><span class="op">}</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="create-a-handler-for-reading-from-database">Create a handler for reading from database<a class="anchor" aria-label="anchor" href="#create-a-handler-for-reading-from-database"></a>
</h3>
<p>As we have now the writing handler ready, we should create a handler to retrieve the data in another user session.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">read_SES_handler</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">self</span>, <span class="va">private</span>, <span class="va">message</span><span class="op">)</span> <span class="op">{</span></span>
<span>  </span>
<span>  <span class="co"># read all results</span></span>
<span>  <span class="va">SES_results</span> <span class="op">&lt;-</span> <span class="fu">googlesheets4</span><span class="fu">::</span><span class="fu"><a href="https://googlesheets4.tidyverse.org/reference/range_read.html" class="external-link">read_sheet</a></span><span class="op">(</span></span>
<span>    ss <span class="op">=</span> <span class="va">private</span><span class="op">$</span><span class="va">gsheet_ss</span>,</span>
<span>    sheet <span class="op">=</span> <span class="st">"SES_results"</span>,</span>
<span>    col_types <span class="op">=</span> <span class="st">"ccn"</span><span class="op">)</span></span>
<span>  </span>
<span>  <span class="co"># get the lastest result for the current user</span></span>
<span>  <span class="va">SES_results</span> <span class="op">&lt;-</span> <span class="va">SES_results</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">user_id</span> <span class="op">==</span> <span class="va">message</span><span class="op">$</span><span class="va">data</span><span class="op">$</span><span class="va">user_id</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/desc.html" class="external-link">desc</a></span><span class="op">(</span><span class="va">timestamp</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html" class="external-link">slice_head</a></span><span class="op">(</span><span class="op">)</span></span>
<span>  </span>
<span>  <span class="co"># return the RegLogConnectorMessage with the score if available</span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">SES_results</span><span class="op">)</span> <span class="op">==</span> <span class="fl">1</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="fu"><a href="../reference/RegLogConnectorMessage.html">RegLogConnectorMessage</a></span><span class="op">(</span>type <span class="op">=</span> <span class="st">"read_SES"</span>,</span>
<span>                                  success <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                                  score <span class="op">=</span> <span class="va">SES_results</span><span class="op">$</span><span class="va">score</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span>
<span>    <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="fu"><a href="../reference/RegLogConnectorMessage.html">RegLogConnectorMessage</a></span><span class="op">(</span>type <span class="op">=</span> <span class="st">"read_SES"</span>,</span>
<span>                                  success <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span><span class="op">}</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="have-everything-in-motion">Have everything in motion<a class="anchor" aria-label="anchor" href="#have-everything-in-motion"></a>
</h3>
<p>I will present there only code for the server logic, containing all needed elements for appending created <em>custom handlers</em> and sending the <em>RegLogConnectorMessages</em> to both write and read data from new sheet.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1"></a><span class="co"># create and assign RegLogServer object</span></span>
<span id="cb12-2"><a href="#cb12-2"></a>RegLog &lt;-<span class="st"> </span>RegLogServer<span class="op">$</span><span class="kw">new</span>(</span>
<span id="cb12-3"><a href="#cb12-3"></a>  <span class="co"># create googlesheet connector</span></span>
<span id="cb12-4"><a href="#cb12-4"></a>  <span class="dt">dbConector =</span> RegLogGsheetConnector<span class="op">$</span><span class="kw">new</span>(</span>
<span id="cb12-5"><a href="#cb12-5"></a>    <span class="co"># provide correct googlesheet ID</span></span>
<span id="cb12-6"><a href="#cb12-6"></a>    <span class="dt">gsheet_ss =</span> gsheet_ss,</span>
<span id="cb12-7"><a href="#cb12-7"></a>    <span class="co"># provide handlers in a named list. Names will be used to choose on basis</span></span>
<span id="cb12-8"><a href="#cb12-8"></a>    <span class="co"># of received RegLogConnectorMessage which function to use</span></span>
<span id="cb12-9"><a href="#cb12-9"></a>    <span class="dt">custom_handlers =</span> <span class="kw">list</span>(<span class="dt">write_SES =</span> write_SES_handler,</span>
<span id="cb12-10"><a href="#cb12-10"></a>                           <span class="dt">read_SES =</span> read_SES_handler)</span>
<span id="cb12-11"><a href="#cb12-11"></a>  ),</span>
<span id="cb12-12"><a href="#cb12-12"></a>  <span class="co"># provide some mailConnector with all needed data</span></span>
<span id="cb12-13"><a href="#cb12-13"></a>  <span class="dt">mailConnector =</span> mailConnector</span>
<span id="cb12-14"><a href="#cb12-14"></a>)</span>
<span id="cb12-15"><a href="#cb12-15"></a></span>
<span id="cb12-16"><a href="#cb12-16"></a><span class="co"># create an event to write the data to the database: there actionButton will</span></span>
<span id="cb12-17"><a href="#cb12-17"></a><span class="co"># trigger it</span></span>
<span id="cb12-18"><a href="#cb12-18"></a><span class="kw">observeEvent</span>(input<span class="op">$</span>write_ses_result, {</span>
<span id="cb12-19"><a href="#cb12-19"></a>  </span>
<span id="cb12-20"><a href="#cb12-20"></a>  <span class="co"># make sure the inputs are provided</span></span>
<span id="cb12-21"><a href="#cb12-21"></a>  <span class="kw">req</span>(input<span class="op">$</span>SES_<span class="dv">1</span>, input<span class="op">$</span>SES_<span class="dv">2</span>, input<span class="op">$</span>SES_<span class="dv">3</span>, input<span class="op">$</span>SES_<span class="dv">4</span>, input<span class="op">$</span>SES_<span class="dv">5</span>,</span>
<span id="cb12-22"><a href="#cb12-22"></a>      input<span class="op">$</span>SES_<span class="dv">6</span>, input<span class="op">$</span>SES_<span class="dv">7</span>, input<span class="op">$</span>SES_<span class="dv">8</span>, input<span class="op">$</span>SES_<span class="dv">9</span>, input<span class="op">$</span>SES_<span class="dv">10</span>)</span>
<span id="cb12-23"><a href="#cb12-23"></a>  </span>
<span id="cb12-24"><a href="#cb12-24"></a>  <span class="co"># get the score by summing all raw scores of items</span></span>
<span id="cb12-25"><a href="#cb12-25"></a>  score &lt;-<span class="st"> </span><span class="kw">sum</span>(input<span class="op">$</span>SES_<span class="dv">1</span>, input<span class="op">$</span>SES_<span class="dv">2</span>, input<span class="op">$</span>SES_<span class="dv">3</span>, input<span class="op">$</span>SES_<span class="dv">4</span>, input<span class="op">$</span>SES_<span class="dv">5</span>,</span>
<span id="cb12-26"><a href="#cb12-26"></a>               input<span class="op">$</span>SES_<span class="dv">6</span>, input<span class="op">$</span>SES_<span class="dv">7</span>, input<span class="op">$</span>SES_<span class="dv">8</span>, input<span class="op">$</span>SES_<span class="dv">9</span>, input<span class="op">$</span>SES_<span class="dv">10</span>)</span>
<span id="cb12-27"><a href="#cb12-27"></a>  </span>
<span id="cb12-28"><a href="#cb12-28"></a>  <span class="co"># send message to the dbConnector's listener</span></span>
<span id="cb12-29"><a href="#cb12-29"></a>  RegLog<span class="op">$</span>dbConnector<span class="op">$</span><span class="kw">listener</span>(</span>
<span id="cb12-30"><a href="#cb12-30"></a>    <span class="kw">RegLogConnectorMessage</span>(</span>
<span id="cb12-31"><a href="#cb12-31"></a>      <span class="co"># specify correct type - the same as the name of the handler</span></span>
<span id="cb12-32"><a href="#cb12-32"></a>      <span class="dt">type =</span> <span class="st">"write_SES"</span>,</span>
<span id="cb12-33"><a href="#cb12-33"></a>      <span class="co"># get required user ID from the RegLog object</span></span>
<span id="cb12-34"><a href="#cb12-34"></a>      <span class="dt">user_id =</span> RegLog<span class="op">$</span><span class="kw">user_id</span>(),</span>
<span id="cb12-35"><a href="#cb12-35"></a>      <span class="dt">score =</span> score))</span>
<span id="cb12-36"><a href="#cb12-36"></a>})</span>
<span id="cb12-37"><a href="#cb12-37"></a></span>
<span id="cb12-38"><a href="#cb12-38"></a><span class="co"># create an event to read the data from the database: eg. another actionButton</span></span>
<span id="cb12-39"><a href="#cb12-39"></a><span class="kw">observeEvent</span>(input<span class="op">$</span>read_last_ses_result, {</span>
<span id="cb12-40"><a href="#cb12-40"></a>  </span>
<span id="cb12-41"><a href="#cb12-41"></a>  <span class="co"># send correct message to the dbConnector's listener</span></span>
<span id="cb12-42"><a href="#cb12-42"></a>  RegLog<span class="op">$</span>dbConnector<span class="op">$</span><span class="kw">listener</span>(</span>
<span id="cb12-43"><a href="#cb12-43"></a>    <span class="kw">RegLogConnectorMessage</span>(</span>
<span id="cb12-44"><a href="#cb12-44"></a>      <span class="dt">type =</span> <span class="st">"read_SES"</span>,</span>
<span id="cb12-45"><a href="#cb12-45"></a>      <span class="dt">user_id =</span> RegLog<span class="op">$</span><span class="kw">user_id</span>())</span>
<span id="cb12-46"><a href="#cb12-46"></a>  )</span>
<span id="cb12-47"><a href="#cb12-47"></a>})</span>
<span id="cb12-48"><a href="#cb12-48"></a></span>
<span id="cb12-49"><a href="#cb12-49"></a><span class="co"># assign the retrieved data: eg. to the reactive</span></span>
<span id="cb12-50"><a href="#cb12-50"></a></span>
<span id="cb12-51"><a href="#cb12-51"></a>SES_result &lt;-<span class="st"> </span><span class="kw">reactive</span>(</span>
<span id="cb12-52"><a href="#cb12-52"></a>  <span class="co"># retrieved data will be available in `message()` field of RegLog object</span></span>
<span id="cb12-53"><a href="#cb12-53"></a>  received_message &lt;-<span class="st"> </span>RegLog<span class="op">$</span><span class="kw">message</span>()</span>
<span id="cb12-54"><a href="#cb12-54"></a>  <span class="co"># make sure to only process correct type of message</span></span>
<span id="cb12-55"><a href="#cb12-55"></a>  <span class="kw">req</span>(received_message<span class="op">$</span>type <span class="op">==</span><span class="st"> "read_SES"</span>)</span>
<span id="cb12-56"><a href="#cb12-56"></a></span>
<span id="cb12-57"><a href="#cb12-57"></a>  <span class="cf">if</span> (<span class="op">!</span><span class="kw">is.null</span>(score)) {</span>
<span id="cb12-58"><a href="#cb12-58"></a>    <span class="co"># get the score if there was any saved in the database</span></span>
<span id="cb12-59"><a href="#cb12-59"></a>    received_message<span class="op">$</span>data<span class="op">$</span>score</span>
<span id="cb12-60"><a href="#cb12-60"></a>  })</span></code></pre></div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Michal Kosinski.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
